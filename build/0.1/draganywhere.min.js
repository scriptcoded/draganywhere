!function(e){function t(t){if(a(t),e(".drag-catcher-active").removeClass("drag-catcher-active"),v){if(m=e(document.elementFromPoint(l.x,l.y)),h=i(m,d),console.log(h),h||(m=m.parents(".drag-catcher").first(),h=i(m,d)),h){if(p=d[m.data("uid")],!p.locked&&(m.addClass("drag-catcher-active"),!p.hasEntered)){p.hasEntered=!0;var o={};p.options.onItemEnter.call(p.element,o)}}else if(h&&null!=p){if(!p.locked&&p.hasEntered){p.hasEntered=!1;var n={};p.options.onItemExit.call(p.element,n)}p={}}v.offset({left:l.x-u,top:l.y-f}),v.css("z-index",999)}}function o(o){if(0==o.which||1==o.which){o.preventDefault(),a(o),v=e(o.target),v.css({"pointer-events":"none",position:"absolute"});var n=v.offset();u=l.x-n.left,f=l.y-n.top,t(o)}}function n(e){if(null!=v){if(h&&null!=p&&!p.locked){var t=s[v.data("uid")],o={name:t.options.name};p.options.onItemDrop.call(p.element,o),p.options.destroyOnDrop&&v.remove()}v.css({top:"",left:"",position:"","pointer-events":"","z-index":""}),v=null,m=null,u=0,f=0}}function a(e){var t=void 0!=e.touches;if(t)var o=e.touches[0];l.x=o?o.pageX:e.pageX,l.y=o?o.pageY:e.pageY}function i(t){return void 0!=d[e(t).data("uid")]}var d={},r=0,s={},c=0,l={x:0,y:0},u=0,f=0,v=null,m=null,h=!1,p=null;e.fn.catcher=function(t,o){var n=t instanceof Object;if(void 0==t||n){var a={destroyOnDrop:!0,onItemEnter:function(){},onItemExit:function(){},onItemDrop:function(){}};if(n)var i=t;else var i={};var s={element:e(this),options:{},hasEntered:!1,locked:!1};for(key in a)void 0!=i[key]?s.options[key]=i[key]:s.options[key]=a[key];e(this).addClass("drag-catcher");var c="catcher-"+r;d[c]=s,e(this).data("uid",c),r++}else if("locked"==t){var c=e(this).data("uid"),s=d[c];s.locked=o,d[c]=s,s.locked?e(this).addClass("drag-catcher-locked"):e(this).removeClass("drag-catcher-locked")}},e.fn.dragItem=function(t,o){var n=t instanceof Object;if(void 0==t||n){var a={name:""};if(n)var i=t;else var i={};var d={element:e(this),options:{}};for(key in a)void 0!=i[key]?d.options[key]=i[key]:d.options[key]=a[key];e(this).addClass("drag-item");var r="dragItem-"+c;s[r]=d,e(this).data("uid",r),c++}},e(document.body).on("mousemove",t),e(document.body).on("touchmove",t),e(document.body).on("mousedown",".drag-item",o),e(document.body).on("touchstart",".drag-item",o),e(document.body).on("mouseup",n),e(document.body).on("touchend",n)}(jQuery);